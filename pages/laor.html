<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>λΌμ¤μ–΄ λ¬΄ν•λ§¤μλ²• V2.2 - κ²½μ  λ„κµ¬ λ¨μ</title>
    <link rel="stylesheet" as="style" crossorigin
        href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.9/dist/web/static/pretendard.css" />
    <link rel="stylesheet" href="../css/common.css">
    <link rel="stylesheet" href="../css/laor.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-9666444539079216"
        crossorigin="anonymous"></script>
</head>

<body>
    <div class="background-blobs">
        <div class="blob blob-1"></div>
        <div class="blob blob-2"></div>
        <div class="blob blob-3"></div>
    </div>

    <div class="app-container">
        <header class="app-header">
            <div class="title-with-logo">
                <img src="../LOGO1.png" alt="Logo" class="header-logo">
                <h1 id="page-title">λ‚΄ ν¬νΈν΄λ¦¬μ¤</h1>
            </div>
            <div class="header-controls">
                <button id="settings-btn" class="icon-btn hidden" onclick="openSettingsModal()">
                    <span class="material-icons-round">settings</span>
                </button>
                <a href="../index.html" id="back-btn-home" class="back-link">
                    <span class="material-icons-round">arrow_back</span>
                    λ©”μΈμΌλ΅
                </a>
                <button id="back-btn-list" class="back-link hidden" onclick="goToPortfolioList()">
                    <span class="material-icons-round">arrow_back</span>
                    λ©λ΅μΌλ΅
                </button>
            </div>
        </header>

        <!-- ν¬νΈν΄λ¦¬μ¤ λ©λ΅ ν™”λ©΄ -->
        <section id="portfolio-list-view" class="view active">
            <div class="portfolio-header">
                <h3>π“ λ‚΄ ν¬νΈν΄λ¦¬μ¤</h3>
                <div class="header-actions">
                    <button class="action-btn secondary small-btn" onclick="exportAllData()">
                        <span class="material-icons-round">download</span> λ°±μ—…
                    </button>
                    <button class="action-btn secondary small-btn" onclick="triggerImport()">
                        <span class="material-icons-round">upload</span> λ³µμ›
                    </button>
                    <input type="file" id="import-file" style="display:none" accept=".json" onchange="importAllData(this)">
                    <button class="action-btn primary small-btn" onclick="openCreateModal()">
                        <span class="material-icons-round">add</span> μƒ ν¬νΈν΄λ¦¬μ¤
                    </button>
                </div>
            </div>
            <div id="portfolio-grid" class="card-grid">
                <!-- ν¬νΈν΄λ¦¬μ¤ μΉ΄λ“λ“¤ -->
            </div>

            <!-- λΌμ¤μ–΄ μ¶μ² -->
            <div class="source-links">
                <p class="source-title">π“ λΌμ¤μ–΄ λ¬΄ν•λ§¤μλ²• κ³µμ‹ μ±„λ„</p>
                <div class="source-buttons">
                    <a href="https://cafe.naver.com/infinitebuying" target="_blank" class="source-btn naver">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M16.273 12.845L7.376 0H0v24h7.727V11.155L16.624 24H24V0h-7.727z"/>
                        </svg>
                        λ„¤μ΄λ²„ μΉ΄ν
                    </a>
                    <a href="https://www.youtube.com/@laofus" target="_blank" class="source-btn youtube">
                        <svg viewBox="0 0 24 24" fill="currentColor">
                            <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                        </svg>
                        μ νλΈ
                    </a>
                </div>
            </div>
        </section>

        <!-- ν¬νΈν΄λ¦¬μ¤ μƒμ„Έ ν™”λ©΄ -->
        <section id="portfolio-detail-view" class="view hidden">
            <!-- ν•µμ‹¬ μ§€ν‘ λ€μ‹λ³΄λ“ -->
            <div class="metrics-dashboard">
                <div class="metric-box">
                    <span class="metric-label">νμ°¨ (T)</span>
                    <span class="metric-value" id="metric-t">0.00</span>
                </div>
                <div class="metric-box star">
                    <span class="metric-label">λ³„νΌμ„ΌνΈ (β…%)</span>
                    <span class="metric-value" id="metric-star">10.00%</span>
                </div>
                <div class="metric-box">
                    <span class="metric-label">λ³΄μ  μλ‰</span>
                    <span class="metric-value" id="metric-qty">0μ£Ό</span>
                </div>
                <div class="metric-box">
                    <span class="metric-label">ν‰λ‹¨κ°€</span>
                    <span class="metric-value" id="metric-avg">$0.00</span>
                </div>
                <div class="metric-box">
                    <span class="metric-label">λ„μ  λ§¤μ</span>
                    <span class="metric-value" id="metric-cumulative">$0</span>
                </div>
                <div class="metric-box">
                    <span class="metric-label">1ν μ‹λ„μ•΅</span>
                    <span class="metric-value" id="metric-daily">$0</span>
                </div>
            </div>

            <!-- μΏΌν„° μ†μ  μ•λ¦Ό -->
            <div id="quarter-alert" class="quarter-alert hidden">
                <span class="material-icons-round">warning</span>
                <div>
                    <strong>β οΈ μΏΌν„° μ†μ  κµ¬κ°„ (T > 39)</strong>
                    <p>λ³΄μ  μλ‰μ 1/4μ„ μ‹μ¥κ°€ λ§¤λ„ ν›„, λ‚¨μ€ μκΈμΌλ΅ μ¬μ§„μ…μ„ κ³ λ ¤ν•μ„Έμ”.</p>
                </div>
            </div>

            <!-- λ§¤λ§¤ κ°€μ΄λ“ μΉ΄λ“ -->
            <div class="guide-card">
                <div class="guide-header">
                    <h3>π“ μ¤λ λ°¤ μ£Όλ¬Έ κ°€μ΄λ“</h3>
                    <span class="phase-badge" id="phase-badge">μ „λ°μ „</span>
                </div>

                <!-- λ§¤μ κ°€μ΄λ“ -->
                <div class="guide-section">
                    <h4>π“¥ λ§¤μ μ£Όλ¬Έ</h4>
                    <div id="buy-guide" class="guide-content"></div>
                </div>

                <!-- λ§¤λ„ κ°€μ΄λ“ -->
                <div class="guide-section">
                    <h4>π“¤ λ§¤λ„ μ£Όλ¬Έ</h4>
                    <div id="sell-guide" class="guide-content"></div>
                </div>

                <!-- ν­λ½ λ€λΉ„ -->
                <div class="guide-section collapse-section">
                    <h4 onclick="toggleCollapse(this)">
                        π”» ν­λ½μ¥ λ€λΉ„ μ¶”κ°€ λ§¤μ
                        <span class="material-icons-round">expand_more</span>
                    </h4>
                    <div id="crash-guide" class="guide-content collapse-content"></div>
                </div>
            </div>

            <!-- κ±°λ λ‚΄μ—­ -->
            <div class="transaction-card">
                <div class="transaction-header">
                    <h3>π“ κ±°λ λ‚΄μ—­</h3>
                    <div class="header-btns">
                        <button class="auto-add-btn-header" onclick="openAutoAddModal()">
                            <span class="material-icons-round">auto_fix_high</span> μλ™
                        </button>
                        <button class="manual-add-btn-header" onclick="openTransactionModal()">
                            <span class="material-icons-round">add</span> μ¶”κ°€
                        </button>
                    </div>
                </div>
                
                <!-- μΈλΌμΈ λΉ λ¥Έ μ…λ ¥ -->
                <div class="quick-input-row">
                    <div class="quick-type-toggle">
                        <button type="button" id="quick-type-buy" class="active" onclick="setQuickType('buy')">λ§¤μ</button>
                        <button type="button" id="quick-type-sell" onclick="setQuickType('sell')">λ§¤λ„</button>
                    </div>
                    <input type="date" id="quick-date" class="quick-input">
                    <input type="number" id="quick-price" class="quick-input" placeholder="κ°€κ²©" step="0.01">
                    <input type="number" id="quick-qty" class="quick-input" placeholder="μλ‰" value="1" min="1">
                    <button class="quick-add-btn" onclick="quickAddTransaction()">
                        <span class="material-icons-round">add_circle</span>
                    </button>
                </div>

                <div class="transaction-list-header">
                    <span>μ ν•</span>
                    <span>λ‚ μ§</span>
                    <span class="text-right">κ°€κ²©</span>
                    <span class="text-right">μλ‰</span>
                    <span class="text-center">μ‚­μ </span>
                </div>
                <div id="transaction-list" class="transaction-list-body">
                    <div class="empty-state">κ±°λ λ‚΄μ—­μ΄ μ—†μµλ‹λ‹¤.</div>
                </div>
            </div>

            <!-- κ³µμ‹ μ„¤λ… -->
            <details class="formula-details">
                <summary>π“ V2.2 κ³„μ‚° κ³µμ‹ λ³΄κΈ°</summary>
                <div class="formula-content">
                    <h4>π“ ν•µμ‹¬ μ§€ν‘</h4>
                    <p><strong>T (νμ°¨)</strong> = λ„μ λ§¤μμ•΅ Γ· 1νλ§¤μμ‹λ„μ•΅</p>
                    <p class="formula-note">β€» μ†μμ  μ…‹μ§Έμλ¦¬μ—μ„ λ°μ¬λ¦Ό (2024.09.05 μ—…λ°μ΄νΈ)</p>
                    
                    <h4 style="margin-top:16px;">π“ β…% (λ³„νΌμ„ΌνΈ) κ³µμ‹</h4>
                    <div style="background: rgba(255,215,0,0.1); padding: 12px; border-radius: 8px; margin: 8px 0;">
                        <p style="margin: 0;"><strong>β…% = R - T Γ— a Γ— (40/N)</strong></p>
                    </div>
                    <p><strong>λ³€μ μ •μ:</strong></p>
                    <ul style="margin-top: 4px;">
                        <li><strong>R</strong> (λ©ν‘μμµλ¥ ): μ‚¬μ©μ μ„¤μ •κ°’ (μ: 10%, 12%)</li>
                        <li><strong>a</strong> (κ°€λ³€κ³„μ): <code>R / 20</code>
                            <ul>
                                <li>R=10% β†’ a=0.5</li>
                                <li>R=12% β†’ a=0.6</li>
                            </ul>
                        </li>
                        <li><strong>N</strong> (λ¶„ν• μΌμ): μ‚¬μ©μ μ„¤μ •κ°’ (μ: 40μΌ, 80μΌ)</li>
                        <li><strong>T</strong> (νμ°¨): μ„μ—μ„ κ³„μ‚°λ κ°’</li>
                    </ul>
                    <p class="formula-note" style="margin-top: 12px;">β€» μμ‹) R=12%, N=40, T=1.03<br>
                    β†’ a = 12/20 = 0.6<br>
                    β†’ β…% = 12 - 1.03 Γ— 0.6 Γ— (40/40) = 12 - 0.618 = <strong>11.38%</strong></p>
                    
                    <hr>
                    <h4>π“¥ λ§¤μ λ΅μ§</h4>
                    <p class="formula-note">β€» "ν‰λ‹¨+β…%" = ν‰λ‹¨ Γ— (1 + β…%/100) | μ) ν‰λ‹¨ $50, β…%=7 β†’ $50Γ—1.07 = $53.50</p>
                    <p><strong>μ „λ°μ „ (T &lt; 20)</strong></p>
                    <ul>
                        <li>0.5νλ¶„: <strong>ν‰λ‹¨κ°€</strong>μ— LOC λ§¤μ</li>
                        <li>0.5νλ¶„: <strong>ν‰λ‹¨Γ—(1+β…%)</strong>μ— LOC λ§¤μ <span class="formula-note">(-$0.01 μ μ©)</span></li>
                    </ul>
                    <p><strong>ν›„λ°μ „ (T β‰¥ 20)</strong></p>
                    <ul>
                        <li>1νλ¶„: <strong>ν‰λ‹¨Γ—(1+β…%)</strong>μ— LOC λ§¤μ <span class="formula-note">(-$0.01 μ μ©)</span></li>
                    </ul>
                    <p class="formula-note">β€» μλ‰ κ³„μ‚°: λ§¤μκΈμ•΅ Γ· κ°€κ²© β†’ λ°μ¬λ¦Ό</p>
                    
                    <hr>
                    <h4>π“¤ λ§¤λ„ λ΅μ§ (μ „ν›„λ° κ³µν†µ)</h4>
                    <ul>
                        <li>1/4 μλ‰: <strong>ν‰λ‹¨Γ—(1+β…%)</strong>μ— LOC λ§¤λ„</li>
                        <li>3/4 μλ‰: <strong>ν‰λ‹¨Γ—(1+λ©ν‘%)</strong>μ— μ§€μ •κ°€ λ§¤λ„</li>
                    </ul>
                    
                    <hr>
                    <h4>β οΈ μΏΌν„° μ†μ </h4>
                    <p>T > 39 μ‹, λ³΄μ μλ‰ 1/4μ„ μ‹μ¥κ°€ λ§¤λ„ ν›„ μ¬μ§„μ…</p>
                </div>
            </details>
        </section>
    </div>

    <!-- ν¬νΈν΄λ¦¬μ¤ μƒμ„±/μμ • λ¨λ‹¬ -->
    <div id="create-modal" class="modal hidden">
        <div class="modal-content">
            <h3 id="modal-title">μƒ ν¬νΈν΄λ¦¬μ¤</h3>
            <div class="input-group">
                <label>μΆ…λ©λ…</label>
                <input type="text" id="pf-name" placeholder="μ: TQQQ, SOXL">
            </div>
            <div class="input-group">
                <label>μ›κΈ (USD)</label>
                <input type="text" id="pf-budget" placeholder="μ: 10,000" inputmode="numeric">
            </div>
            <div class="input-group">
                <label>λ¶„ν•  μΌμ (10~80)</label>
                <input type="number" id="pf-days" value="40" min="10" max="80">
            </div>
            <div class="input-group">
                <label>λ©ν‘ μμµλ¥  (%)</label>
                <input type="number" id="pf-target" value="10" min="1" max="50" step="0.5">
            </div>
            <div class="modal-actions">
                <button class="action-btn secondary" onclick="closeModal('create-modal')">μ·¨μ†</button>
                <button class="action-btn primary" id="modal-save-btn" onclick="savePortfolio()">μƒμ„±</button>
            </div>
        </div>
        <div class="modal-backdrop" onclick="closeModal('create-modal')"></div>
    </div>

    <!-- μλ™ κ±°λ μ¶”κ°€ λ¨λ‹¬ -->
    <div id="auto-add-modal" class="modal hidden">
        <div class="modal-content" style="max-width: 500px;">
            <h3>π“² μλ™ κ±°λ μ¶”κ°€</h3>
            <p style="font-size: 0.85rem; color: #aaa; margin-bottom: 12px;">
                μ¦κ¶μ‚¬ μ²΄κ²° μ•λ¦Ό λ©”μ‹μ§€λ¥Ό λ¶™μ—¬λ„£μΌμ„Έμ”
            </p>
            <div class="input-group">
                <label>μ²΄κ²° μ•λ¦Ό λ‚΄μ©</label>
                <textarea id="auto-input-text" rows="10" placeholder="*****μμ‹*****
                
[λ©”λ¦¬μΈ μ¦κ¶] ν•΄μ™Έμ£Όμ‹ μ£Όλ¬Έμ²΄κ²° μ•λ‚΄

κ³„μΆλ… : λ‹¬ν½μ΄μ§‘
κ³„μΆλ²νΈ : 0000000-000
μΆ…λ©λ… : PROSHARES QQQ 3X(TQQQ)
λ§¤λ§¤κµ¬λ¶„ : λ§¤μ
μ²΄κ²°λ‹¨κ°€ : USD 55.0800
μ£Όλ¬Έμλ‰ : 1μ£Ό
μ²΄κ²°μλ‰ : 1μ£Ό
μ²΄κ²°κΈμ•΅ : USD 55.08
μ²΄κ²°μΌμ : 01/26"></textarea>
            </div>
            
            <!-- νμ‹± κ²°κ³Ό (μμ • κ°€λ¥) -->
            <div id="parse-preview" class="parse-preview hidden">
                <div class="preview-title">π“‹ νμ‹± κ²°κ³Ό (μμ • κ°€λ¥)</div>
                <div class="preview-edit-row">
                    <label>λ§¤λ§¤κµ¬λ¶„</label>
                    <div class="type-toggle small">
                        <button type="button" id="parsed-type-buy" class="active" onclick="setParsedType('buy')">λ§¤μ</button>
                        <button type="button" id="parsed-type-sell" onclick="setParsedType('sell')">λ§¤λ„</button>
                    </div>
                </div>
                <div class="preview-edit-row">
                    <label>μ²΄κ²°λ‹¨κ°€ ($)</label>
                    <input type="number" id="parsed-price" step="0.0001" placeholder="0.00">
                </div>
                <div class="preview-edit-row">
                    <label>μ²΄κ²°μλ‰ (μ£Ό)</label>
                    <input type="number" id="parsed-qty" min="1" placeholder="0">
                </div>
                <div class="preview-edit-row">
                    <label>μ²΄κ²°μΌμ</label>
                    <input type="date" id="parsed-date">
                </div>
            </div>
            
            <div class="modal-actions">
                <button class="action-btn secondary" onclick="closeModal('auto-add-modal')">μ·¨μ†</button>
                <button class="action-btn" style="background: #ff9800;" onclick="parseAndPreview()">νμ‹±ν•κΈ°</button>
                <button class="action-btn primary" onclick="confirmAutoAdd()">μ¶”κ°€</button>
            </div>
        </div>
        <div class="modal-backdrop" onclick="closeModal('auto-add-modal')"></div>
    </div>

    <!-- κ±°λ μ¶”κ°€ λ¨λ‹¬ -->
    <div id="transaction-modal" class="modal hidden">
        <div class="modal-content">
            <h3>κ±°λ μ¶”κ°€</h3>
            <div class="input-group">
                <label>κ±°λ μ ν•</label>
                <div class="type-toggle">
                    <button type="button" id="type-buy" class="active" onclick="setTransType('buy')">λ§¤μ</button>
                    <button type="button" id="type-sell" onclick="setTransType('sell')">λ§¤λ„</button>
                </div>
            </div>
            <div class="input-group">
                <label>λ‚ μ§</label>
                <input type="date" id="trans-date">
            </div>
            <div class="input-group">
                <label>μ²΄κ²°κ°€ (USD)</label>
                <input type="number" id="trans-price" step="0.01" placeholder="0.00">
            </div>
            <div class="input-group">
                <label>μλ‰ (μ£Ό)</label>
                <input type="number" id="trans-qty" step="1" value="1" min="1">
            </div>
            <div class="modal-actions">
                <button class="action-btn secondary" onclick="closeModal('transaction-modal')">μ·¨μ†</button>
                <button class="action-btn primary" onclick="addTransaction()">μ¶”κ°€</button>
            </div>
        </div>
        <div class="modal-backdrop" onclick="closeModal('transaction-modal')"></div>
    </div>

    <!-- μ›ν„°λ§ν¬ -->
    <div class="watermark">
        <img src="../LOGO1.png" alt="">
    </div>

    <script src="../js/laor.js"></script>
</body>

</html>
